<!doctype html>
<html>
	<head>
		<title>CVK TEST</title>    
		<script type="text/javascript" charset="utf-8">
			document.addEventListener("deviceready", onDeviceReady, false);
			var watchID = null;

			function onDeviceReady() {
				//checkStorage();
				//navigator.geolocation.getCurrentPosition(onSuccess, onError);
				var options = { timeout: 30000 };
				watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
			}
			
			function checkStorage() {
				var language = window.localStorage.getItem("language");
				alert('here'+language);
				if(language == null){
					alert('if');
					window.localStorage.setItem("language", "IN");
				}
				language = window.localStorage.getItem("language");
				alert(language);				
			}
			
			function onSuccess(position) {
				var element = document.getElementById('geolocation');
				alert('success');
				element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                            'Longitude: ' + position.coords.longitude     + '<br />' +
                            '<hr />'      + element.innerHTML;

			}

			// onError Callback receives a PositionError object
			//
			function onError(error) {
				alert('code: '    + error.code    + '\n' +
					  'message: ' + error.message + '\n');
			}
		</script>
	</head>
	<body>
		<h1>CVK TEST</h1>
		<p id="geolocation">Watching geolocation...</p>
	</body>
	<script type="text/javascript" src="phonegap.js"></script>
</html>